[env:application]
platform = ststm32
board = genericSTM32F103C8
framework = stm32cube
upload_protocol = stlink
debug_tool = stlink
monitor_speed = 115200

# CRITIQUE: Linker script pour 0x08002000
board_build.ldscript = STM32F103C8Tx_FLASH_APPLICATION.ld

# CRITIQUE: VECT_TAB_OFFSET pour la table des vecteurs
build_flags = 
    -DSTM32F103xB
    -DUSE_HAL_DRIVER
    -DVECT_TAB_OFFSET=0x2000
    -Os
    -Wall

upload_flags = 
    -c
    set CPUTAPID 0

# Pas de post_build si tu utilises le script externe